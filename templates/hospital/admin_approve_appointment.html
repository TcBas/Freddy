{% extends 'hospital/admin_base.html' %}
{% block content %}

<head>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
  <!-- Estilos personalizados -->
  <style>
    a:link {
      text-decoration: none;
    }

    .panel-primary {
      border: 1px solid #ddd;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      margin-top: 30px;
      overflow: hidden;
    }
    
    .panel-heading {
      background-color: #007bff;
      padding: 15px;
      border-bottom: 1px solid #ddd;
    }
    
    .panel-title {
      text-align: center;
      color: white;
      font-size: 24px;
      font-weight: 600;
      margin: 0;
    }

    .table {
      margin-bottom: 0;
    }
    
    .table thead th {
      background-color: #f8f9fa;
      font-weight: 600;
      text-align: center;
      vertical-align: middle;
    }
    
    .table tbody tr:hover {
      background-color: #f1f8ff;
    }
    
    .action-buttons {
      display: flex;
      justify-content: center;
    }
    
    .btn-xs {
      padding: 3px 8px;
      margin: 0 3px;
    }

    /* Añadido: Estilo para la sección de logout */
    .logout-section {
      text-align: right;
      margin: 20px 0;
    }

    @media (max-width: 768px) {
      .container {
        padding: 0 10px;
      }
      .table {
        font-size: 14px;
      }
    }
  </style>
</head>

<div class="container">
  <!-- Sección de cierre de sesión -->
  <div class="logout-section">
    <form action="{% url 'logout' %}" method="GET">
      {% csrf_token %}
      <button type="submit" class="btn btn-outline-danger">
        <i class="bi bi-box-arrow-right"></i> Cerrar Sesión
      </button>
    </form>
  </div>

  <div class="panel panel-primary">
    <div class="panel-heading">
      <h3 class="panel-title">Aplicaciones de Citas Requeridas</h3>
    </div>
    <div class="table-responsive">
      <table class="table table-hover table-striped" id="dev-table">
        <thead>
          <tr>
            <th>Nombre del Doctor</th>
            <th>Nombre del Paciente</th>
            <th>Descripción</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          {% for a in appointments %}
          <tr>
            <td>{{ a.doctorName }}</td>
            <td>{{ a.patientName }}</td>
            <td>{{ a.description }}</td>
            <td>{{ a.appointmentDate|date:"d/m/Y H:i" }}</td>
            <td class="text-center">
              <a class="btn btn-primary btn-xs" href="{% url 'approve-appointment' a.id %}" title="Aprobar cita">
                <i class="bi bi-check-lg"></i>
              </a>
              <a class="btn btn-danger btn-xs" href="{% url 'reject-appointment' a.id %}" title="Rechazar cita">
                <i class="bi bi-trash"></i>
              </a>
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="5" class="text-center py-3">No hay citas pendientes por aprobar.</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Bootstrap JS Bundle con Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

{% endblock content %}
